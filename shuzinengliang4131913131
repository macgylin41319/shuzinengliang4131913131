<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°å­—æ˜“ç» - ä¹¾å¤æ¼”ç®—</title>
    <style>
        :root {
            --primary-color: #8E2C2C; /* ä¼ ç»Ÿæœ±ç ‚çº¢ */
            --secondary-color: #D4AF37; /* é‡‘è‰² */
            --bg-color: #F9F7F2; /* å®£çº¸ç™½ */
            --text-color: #333;
            --yin-color: #2c3e50;
            --yang-color: #c0392b;
        }

        body {
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        header {
            background: var(--primary-color);
            color: white;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        header h1 { margin: 0; font-size: 1.5rem; }
        header p { margin: 5px 0 0; font-size: 0.9rem; opacity: 0.9; }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* å¯¼èˆªæ ‡ç­¾ */
        .tabs {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .tab-btn {
            flex: 1;
            padding: 15px;
            border: none;
            background: white;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: 0.3s;
        }

        .tab-btn.active {
            background: var(--secondary-color);
            color: white;
        }

        .section { display: none; animation: fadeIn 0.5s; }
        .section.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-left: 5px solid var(--primary-color);
        }

        h2, h3 { color: var(--primary-color); margin-top: 0; }

        /* è¡¨å•æ ·å¼ */
        .input-group {
            margin-bottom: 15px;
        }
        
        input[type="number"], input[type="date"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1.1rem;
            box-sizing: border-box;
        }

        button.action-btn {
            width: 100%;
            padding: 12px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            cursor: pointer;
        }

        /* ç»“æœå±•ç¤º */
        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .num-pair {
            background: #f0f0f0;
            padding: 10px;
            text-align: center;
            border-radius: 5px;
            border: 1px solid #eee;
        }

        .num-pair .digits { font-size: 1.2rem; font-weight: bold; letter-spacing: 2px; }
        .num-pair .star-name { font-size: 0.9rem; margin-top: 5px; }
        .num-pair.ji { color: #27ae60; background: #eafaf1; border-color: #27ae60; } /* å‰ */
        .num-pair.xiong { color: #c0392b; background: #fdedec; border-color: #c0392b; } /* å‡¶ */
        .num-pair.ping { color: #7f8c8d; }

        /* äº”è¡Œç”Ÿå…‹å›¾ç¤º */
        .wuxing-chart {
            text-align: center;
            margin: 20px 0;
            position: relative;
            height: 200px;
        }
        .wuxing-node {
            width: 40px;
            height: 40px;
            line-height: 40px;
            border-radius: 50%;
            background: #333;
            color: white;
            position: absolute;
            font-size: 0.9rem;
        }
        /* ç®€å•å®šä½äº”è¡Œ */
        .wx-wood { top: 10%; right: 10%; background: #2ecc71; }
        .wx-fire { bottom: 10%; right: 20%; background: #e74c3c; }
        .wx-earth { bottom: 10%; left: 20%; background: #f1c40f; color: #333; }
        .wx-metal { top: 10%; left: 10%; background: #bdc3c7; color: #333; }
        .wx-water { top: -10%; left: 50%; transform: translateX(-50%); background: #3498db; }

        /* è¡¨æ ¼ */
        table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.9rem; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background-color: var(--secondary-color); color: white; }

        .diagram-box {
            text-align: center;
            margin: 20px 0;
        }
        .bagua-diagram {
            width: 150px;
            height: 150px;
            border: 2px solid var(--text-color);
            border-radius: 50%;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(90deg, #fff 50%, #000 50%);
        }
        .bagua-diagram::after {
            content: "â˜¯";
            font-size: 5rem;
            color: #333; 
            /* Simplified Taiji visual */
        }

    </style>
</head>
<body>

<header>
    <h1>æ•°å­—æ˜“ç»</h1>
    <p>è±¡æ•°ç†å  Â· å…«æ˜Ÿç£åœº Â· äº”è¡Œç”Ÿå…‹</p>
</header>

<div class="container">
    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('analysis')">æ•°å­—æ¼”ç®—</button>
        <button class="tab-btn" onclick="switchTab('culture')">æ˜“ç»æ–‡åŒ–</button>
        <button class="tab-btn" onclick="switchTab('reference')">å…«æ˜Ÿå›¾è¡¨</button>
    </div>

    <div id="analysis" class="section active">
        <div class="card">
            <h3>ğŸ”¢ å·ç å‰å‡¶åˆ†æ</h3>
            <p style="font-size:0.8rem; color:#666;">è¾“å…¥æ‰‹æœºå·ã€è½¦ç‰Œæˆ–ä»»æ„æ•°å­—ä¸²è¿›è¡Œå…«æ˜Ÿäº”è¡Œè§£æ</p>
            <div class="input-group">
                <input type="number" id="phoneNumber" placeholder="è¯·è¾“å…¥æ•°å­— (å¦‚: 13812345678)">
            </div>
            <button class="action-btn" onclick="analyzeNumber()">å¼€å§‹æ’ç›˜</button>
            
            <div id="numberResult" style="display:none; margin-top:20px;">
                <h4>åˆ†æç»“æœï¼š</h4>
                <div class="result-grid" id="pairsOutput"></div>
                <div id="summaryText" style="margin-top:15px; font-size:0.95rem;"></div>
            </div>
        </div>

        <div class="card">
            <h3>ğŸ“… ç”Ÿè¾°æ•°å­—äº”è¡Œ (åŠŸèƒ½5)</h3>
            <div class="input-group">
                <input type="date" id="birthDate">
            </div>
            <button class="action-btn" onclick="analyzeBirth()">åˆ†æç”Ÿè¾°èƒ½é‡</button>
            <div id="birthResult" style="margin-top:15px;"></div>
        </div>
    </div>

    <div id="culture" class="section">
        <div class="card">
            <h3>â˜¯ æ˜“ç»åŸºæœ¬æ„æ¶</h3>
            <p><strong>é˜´é˜³ï¼š</strong>ä¸‡ç‰©ä¹‹æœ¬ï¼Œä¸€é˜´ä¸€é˜³ä¹‹è°“é“ã€‚</p>
            <p><strong>ä¸‰æ‰ï¼š</strong>å¤©ï¼ˆæ—¶ï¼‰ã€åœ°ï¼ˆåˆ©ï¼‰ã€äººï¼ˆå’Œï¼‰ã€‚</p>
            <p><strong>äº”è¡Œï¼š</strong>é‡‘ã€æœ¨ã€æ°´ã€ç«ã€åœŸï¼Œç›¸ç”Ÿç›¸å…‹ï¼Œç”Ÿç”Ÿä¸æ¯ã€‚</p>
            
            <h4>äº”è¡Œç”Ÿå…‹ (åŠŸèƒ½6)</h4>
            <div style="text-align:center; padding:10px; background:#f9f9f9; border-radius:5px;">
                <p><strong>ç›¸ç”Ÿï¼š</strong>æœ¨ç”Ÿç« â†’ ç«ç”ŸåœŸ â†’ åœŸç”Ÿé‡‘ â†’ é‡‘ç”Ÿæ°´ â†’ æ°´ç”Ÿæœ¨</p>
                <p><strong>ç›¸å…‹ï¼š</strong>æœ¨å…‹åœŸ â†’ åœŸå…‹æ°´ â†’ æ°´å…‹ç« â†’ ç«å…‹é‡‘ â†’ é‡‘å…‹æœ¨</p>
            </div>
        </div>

        <div class="card">
            <h3>ğŸ“œ å…«å¦èµ·æº</h3>
            <table style="width:100%">
                <tr>
                    <th width="50%">å…ˆå¤©å…«å¦ (ä½“)</th>
                    <th width="50%">åå¤©å…«å¦ (ç”¨)</th>
                </tr>
                <tr>
                    <td>
                        <strong>ä¹¾å…‘ç¦»éœ‡ï¼Œå·½åè‰®å¤</strong><br>
                        <small>å¤©åœ°å®šä½ï¼Œå±±æ³½é€šæ°”ï¼Œé›·é£ç›¸è–„ï¼Œæ°´ç«ä¸ç›¸å°„ã€‚</small>
                    </td>
                    <td>
                        <strong>åå¤éœ‡å·½ï¼Œä¹¾å…‘è‰®ç¦»</strong><br>
                        <small>å¸å‡ºä¹éœ‡ï¼Œé½ä¹å·½ï¼Œç›¸è§ä¹ç¦»...æˆè¨€ä¹è‰®ã€‚</small>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <div id="reference" class="section">
        <div class="card">
            <h3>ğŸŒŸ å…«æ˜Ÿæ•°å­—ç£åœºè¡¨</h3>
            <p>æ ¹æ®ã€Šæ•°å­—èƒ½é‡å­¦ã€‹ï¼Œæ•°å­—ç»„åˆåˆ†ä¸ºå››å‰æ˜Ÿä¸å››å‡¶æ˜Ÿã€‚</p>
            
            <h4 style="color:#27ae60">å››å‰æ˜Ÿ (ä¸Šç­‰è¿åŠ¿)</h4>
            <table>
                <tr>
                    <th>æ˜Ÿå</th>
                    <th>äº”è¡Œ</th>
                    <th>æ•°ç»„</th>
                    <th>æ ¸å¿ƒå«ä¹‰</th>
                </tr>
                <tr>
                    <td>å¤©åŒ»</td>
                    <td>åœŸ</td>
                    <td>13/31, 68/86, 49/94, 27/72</td>
                    <td>è´¢å¯Œã€æ­£æ¡ƒèŠ±ã€ä¸šç»©</td>
                </tr>
                <tr>
                    <td>ç”Ÿæ°”</td>
                    <td>æœ¨</td>
                    <td>14/41, 67/76, 39/93, 28/82</td>
                    <td>è´µäººã€ä¹è§‚ã€ç”Ÿæœº</td>
                </tr>
                <tr>
                    <td>å»¶å¹´</td>
                    <td>é‡‘</td>
                    <td>19/91, 78/87, 34/43, 26/62</td>
                    <td>é¢†å¯¼ã€å®ˆè´¢ã€å‹åŠ›</td>
                </tr>
                <tr>
                    <td>ä¼ä½</td>
                    <td>æœ¨/å¹³</td>
                    <td>11/22, 33/44, 55/66...</td>
                    <td>ç­‰å¾…ã€è“„åŠ¿ã€è¢«åŠ¨</td>
                </tr>
            </table>

            <h4 style="color:#c0392b">å››å‡¶æ˜Ÿ (éœ€åŒ–è§£)</h4>
            <table>
                <tr>
                    <th>æ˜Ÿå</th>
                    <th>äº”è¡Œ</th>
                    <th>æ•°ç»„</th>
                    <th>æ ¸å¿ƒå«ä¹‰</th>
                </tr>
                <tr>
                    <td>ç»å‘½</td>
                    <td>é‡‘</td>
                    <td>12/21, 69/96, 48/84, 37/73</td>
                    <td>å†²åŠ¨ã€æŠ•èµ„ã€ç ´è´¢</td>
                </tr>
                <tr>
                    <td>äº”é¬¼</td>
                    <td>ç«</td>
                    <td>18/81, 79/97, 36/63, 24/42</td>
                    <td>å˜åŠ¨ã€æ‰åã€è¡€å…‰</td>
                </tr>
                <tr>
                    <td>å…­ç…</td>
                    <td>æ°´</td>
                    <td>16/61, 47/74, 38/83, 29/92</td>
                    <td>å¼‚æ€§ç¼˜ã€çº è‘›ã€æƒ…ç»ª</td>
                </tr>
                <tr>
                    <td>ç¥¸å®³</td>
                    <td>åœŸ</td>
                    <td>17/71, 89/98, 46/64, 23/32</td>
                    <td>å£èˆŒã€å°äººã€ç—…ç—›</td>
                </tr>
            </table>
        </div>
    </div>
</div>

<script>
    // åŸºç¡€æ•°æ®å®šä¹‰ (å…«æ˜Ÿæ•°ç»„åº“)
    const starData = {
        '13': { name: 'å¤©åŒ»', type: 'å‰', element: 'åœŸ', level: 1, desc: 'æ­£è´¢/æ­£æ¡ƒèŠ±' },
        '31': { name: 'å¤©åŒ»', type: 'å‰', element: 'åœŸ', level: 1, desc: 'æ­£è´¢/æ­£æ¡ƒèŠ±' },
        '68': { name: 'å¤©åŒ»', type: 'å‰', element: 'åœŸ', level: 2, desc: 'è´¢è¿ä½³' },
        '86': { name: 'å¤©åŒ»', type: 'å‰', element: 'åœŸ', level: 2, desc: 'è´¢è¿ä½³' },
        '49': { name: 'å¤©åŒ»', type: 'å‰', element: 'åœŸ', level: 3, desc: 'è´¢è¿ä¸€èˆ¬' },
        '94': { name: 'å¤©åŒ»', type: 'å‰', element: 'åœŸ', level: 3, desc: 'è´¢è¿ä¸€èˆ¬' },
        '27': { name: 'å¤©åŒ»', type: 'å‰', element: 'åœŸ', level: 4, desc: 'å°è´¢' },
        '72': { name: 'å¤©åŒ»', type: 'å‰', element: 'åœŸ', level: 4, desc: 'å°è´¢' },

        '14': { name: 'ç”Ÿæ°”', type: 'å‰', element: 'æœ¨', level: 1, desc: 'å¤§è´µäºº' },
        '41': { name: 'ç”Ÿæ°”', type: 'å‰', element: 'æœ¨', level: 1, desc: 'å¤§è´µäºº' },
        '67': { name: 'ç”Ÿæ°”', type: 'å‰', element: 'æœ¨', level: 2, desc: 'ä¹å¤©æ´¾' },
        '76': { name: 'ç”Ÿæ°”', type: 'å‰', element: 'æœ¨', level: 2, desc: 'ä¹å¤©æ´¾' },
        '39': { name: 'ç”Ÿæ°”', type: 'å‰', element: 'æœ¨', level: 3, desc: 'äººç¼˜å¥½' },
        '93': { name: 'ç”Ÿæ°”', type: 'å‰', element: 'æœ¨', level: 3, desc: 'äººç¼˜å¥½' },
        '28': { name: 'ç”Ÿæ°”', type: 'å‰', element: 'æœ¨', level: 4, desc: 'å¼€å¿ƒ' },
        '82': { name: 'ç”Ÿæ°”', type: 'å‰', element: 'æœ¨', level: 4, desc: 'å¼€å¿ƒ' },

        '19': { name: 'å»¶å¹´', type: 'å‰', element: 'é‡‘', level: 1, desc: 'é¢†è¢–æ ¼å±€' },
        '91': { name: 'å»¶å¹´', type: 'å‰', element: 'é‡‘', level: 1, desc: 'é¢†è¢–æ ¼å±€' },
        '78': { name: 'å»¶å¹´', type: 'å‰', element: 'é‡‘', level: 2, desc: 'è´£ä»»æ„Ÿ' },
        '87': { name: 'å»¶å¹´', type: 'å‰', element: 'é‡‘', level: 2, desc: 'è´£ä»»æ„Ÿ' },
        '34': { name: 'å»¶å¹´', type: 'å‰', element: 'é‡‘', level: 3, desc: 'äº‹ä¸šå¿ƒ' },
        '43': { name: 'å»¶å¹´', type: 'å‰', element: 'é‡‘', level: 3, desc: 'äº‹ä¸šå¿ƒ' },
        '26': { name: 'å»¶å¹´', type: 'å‰', element: 'é‡‘', level: 4, desc: 'ä¸“æ³¨' },
        '62': { name: 'å»¶å¹´', type: 'å‰', element: 'é‡‘', level: 4, desc: 'ä¸“æ³¨' },

        '12': { name: 'ç»å‘½', type: 'å‡¶', element: 'é‡‘', level: 1, desc: 'æåº¦å†²åŠ¨' },
        '21': { name: 'ç»å‘½', type: 'å‡¶', element: 'é‡‘', level: 1, desc: 'æåº¦å†²åŠ¨' },
        '69': { name: 'ç»å‘½', type: 'å‡¶', element: 'é‡‘', level: 2, desc: 'æŠ•èµ„é£é™©' },
        '96': { name: 'ç»å‘½', type: 'å‡¶', element: 'é‡‘', level: 2, desc: 'æŠ•èµ„é£é™©' },
        '48': { name: 'ç»å‘½', type: 'å‡¶', element: 'é‡‘', level: 3, desc: 'æ•¢æ‹¼' },
        '84': { name: 'ç»å‘½', type: 'å‡¶', element: 'é‡‘', level: 3, desc: 'æ•¢æ‹¼' },
        '37': { name: 'ç»å‘½', type: 'å‡¶', element: 'é‡‘', level: 4, desc: 'ç›´çº¿æ€ç»´' },
        '73': { name: 'ç»å‘½', type: 'å‡¶', element: 'é‡‘', level: 4, desc: 'ç›´çº¿æ€ç»´' },

        '17': { name: 'ç¥¸å®³', type: 'å‡¶', element: 'åœŸ', level: 1, desc: 'å£èˆŒæ˜¯é' },
        '71': { name: 'ç¥¸å®³', type: 'å‡¶', element: 'åœŸ', level: 1, desc: 'å£èˆŒæ˜¯é' },
        '89': { name: 'ç¥¸å®³', type: 'å‡¶', element: 'åœŸ', level: 2, desc: 'å¥½é¢å­' },
        '98': { name: 'ç¥¸å®³', type: 'å‡¶', element: 'åœŸ', level: 2, desc: 'å¥½é¢å­' },
        '46': { name: 'ç¥¸å®³', type: 'å‡¶', element: 'åœŸ', level: 3, desc: 'æŠ±æ€¨' },
        '64': { name: 'ç¥¸å®³', type: 'å‡¶', element: 'åœŸ', level: 3, desc: 'æŠ±æ€¨' },
        '23': { name: 'ç¥¸å®³', type: 'å‡¶', element: 'åœŸ', level: 4, desc: 'å˜´ç¡¬' },
        '32': { name: 'ç¥¸å®³', type: 'å‡¶', element: 'åœŸ', level: 4, desc: 'å˜´ç¡¬' },

        '18': { name: 'äº”é¬¼', type: 'å‡¶', element: 'ç«', level: 1, desc: 'å˜åŠ¨å¤§' },
        '81': { name: 'äº”é¬¼', type: 'å‡¶', element: 'ç«', level: 1, desc: 'å˜åŠ¨å¤§' },
        '79': { name: 'äº”é¬¼', type: 'å‡¶', element: 'ç«', level: 2, desc: 'æ‰åæ¨ªæº¢' },
        '97': { name: 'äº”é¬¼', type: 'å‡¶', element: 'ç«', level: 2, desc: 'æ‰åæ¨ªæº¢' },
        '36': { name: 'äº”é¬¼', type: 'å‡¶', element: 'ç«', level: 3, desc: 'å¤šç–‘' },
        '63': { name: 'äº”é¬¼', type: 'å‡¶', element: 'ç«', level: 3, desc: 'å¤šç–‘' },
        '24': { name: 'äº”é¬¼', type: 'å‡¶', element: 'ç«', level: 4, desc: 'ç¬é—´å¿µå¤´' },
        '42': { name: 'äº”é¬¼', type: 'å‡¶', element: 'ç«', level: 4, desc: 'ç¬é—´å¿µå¤´' },

        '16': { name: 'å…­ç…', type: 'å‡¶', element: 'æ°´', level: 1, desc: 'æƒ…æ„Ÿçº è‘›' },
        '61': { name: 'å…­ç…', type: 'å‡¶', element: 'æ°´', level: 1, desc: 'æƒ…æ„Ÿçº è‘›' },
        '47': { name: 'å…­ç…', type: 'å‡¶', element: 'æ°´', level: 2, desc: 'å¼‚æ€§ç¼˜ä½³' },
        '74': { name: 'å…­ç…', type: 'å‡¶', element: 'æ°´', level: 2, desc: 'å¼‚æ€§ç¼˜ä½³' },
        '38': { name: 'å…­ç…', type: 'å‡¶', element: 'æ°´', level: 3, desc: 'æƒ…ç»ªåŒ–' },
        '83': { name: 'å…­ç…', type: 'å‡¶', element: 'æ°´', level: 3, desc: 'æƒ…ç»ªåŒ–' },
        '29': { name: 'å…­ç…', type: 'å‡¶', element: 'æ°´', level: 4, desc: 'ç»†è‡´' },
        '92': { name: 'å…­ç…', type: 'å‡¶', element: 'æ°´', level: 4, desc: 'ç»†è‡´' },

        '11': { name: 'ä¼ä½', type: 'å¹³', element: 'æœ¨', level: 1, desc: 'è“„åŠ¿å¾…å‘' },
        '22': { name: 'ä¼ä½', type: 'å¹³', element: 'æœ¨', level: 1, desc: 'è“„åŠ¿å¾…å‘' },
        '33': { name: 'ä¼ä½', type: 'å¹³', element: 'æœ¨', level: 2, desc: 'å›ºå®ˆ' },
        '44': { name: 'ä¼ä½', type: 'å¹³', element: 'æœ¨', level: 2, desc: 'å›ºå®ˆ' },
        '55': { name: 'ä¼ä½', type: 'å¹³', element: 'æœ¨', level: 3, desc: 'è¢«åŠ¨' },
        '66': { name: 'ä¼ä½', type: 'å¹³', element: 'æœ¨', level: 3, desc: 'è¢«åŠ¨' },
        '77': { name: 'ä¼ä½', type: 'å¹³', element: 'æœ¨', level: 4, desc: 'æ€è€ƒ' },
        '88': { name: 'ä¼ä½', type: 'å¹³', element: 'æœ¨', level: 4, desc: 'æ€è€ƒ' },
        '99': { name: 'ä¼ä½', type: 'å¹³', element: 'æœ¨', level: 1, desc: 'æŒç»­' },
        '00': { name: 'ä¼ä½', type: 'å¹³', element: 'æœ¨', level: 1, desc: 'éšæ€§' }
    };

    // æ ‡ç­¾åˆ‡æ¢
    function switchTab(tabId) {
        document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        event.target.classList.add('active');
    }

    // 1. æ•°å­—åˆ†æé€»è¾‘
    function analyzeNumber() {
        const input = document.getElementById('phoneNumber').value;
        const resultDiv = document.getElementById('numberResult');
        const grid = document.getElementById('pairsOutput');
        const summary = document.getElementById('summaryText');
        
        if (!input || input.length < 2) {
            alert("è¯·è¾“å…¥è‡³å°‘2ä½æ•°å­—");
            return;
        }

        grid.innerHTML = '';
        summary.innerHTML = '';
        let pairCounts = { 'å¤©åŒ»': 0, 'ç»å‘½': 0, 'å»¶å¹´': 0, 'äº”é¬¼': 0 };

        // æ‹†åˆ†æ•°å­—ä¸ºæ•°å¯¹ (ä¾‹: 138 -> 13, 38)
        // è¿‡æ»¤0å’Œ5çš„ç®€å•å¤„ç†ï¼ˆåœ¨æ•°å­—èƒ½é‡å­¦ä¸­ï¼Œ0ä¸ºéšæ€§ï¼Œ5ä¸ºåŠ å¼ºï¼Œæ­¤å¤„åšåŸºç¡€ç‰ˆç›´æ¥æ˜ å°„ï¼Œå¤æ‚ç‰ˆéœ€ç‰¹æ®Šå¤„ç†ï¼‰
        // ä¸ºäº†æ¼”ç¤ºæ¸…æ™°ï¼Œæˆ‘ä»¬æš‚ä¸”å¿½ç•¥0å’Œ5çš„ç‰¹æ®Šå˜æ›œè§„åˆ™ï¼Œç›´æ¥åŒ¹é…
        const cleanNum = input; 

        for (let i = 0; i < cleanNum.length - 1; i++) {
            const pair = cleanNum.substring(i, i+2);
            const data = starData[pair];
            
            const div = document.createElement('div');
            
            if (data) {
                // ç»Ÿè®¡å‰å‡¶
                if(pairCounts[data.name] !== undefined) pairCounts[data.name]++;
                
                // æ¸²æŸ“ UI
                let colorClass = data.type === 'å‰' ? 'ji' : (data.type === 'å‡¶' ? 'xiong' : 'ping');
                div.className = `num-pair ${colorClass}`;
                div.innerHTML = `<div class="digits">${pair}</div>
                                 <div class="star-name">${data.name}</div>
                                 <div style="font-size:0.7rem">${data.level}çº§</div>`;
            } else {
                // å¤„ç† 05 æˆ–å…¶ä»–æœªå®šä¹‰ç»„åˆ
                div.className = `num-pair`;
                div.innerHTML = `<div class="digits">${pair}</div><div class="star-name">-</div>`;
            }
            grid.appendChild(div);
        }

        // ç”Ÿæˆç®€æŠ¥
        let summaryHtml = "<strong>ç£åœºç®€è¯„ï¼š</strong><br>";
        if(pairCounts['å¤©åŒ»'] > 0) summaryHtml += "ğŸ’° å«æœ‰å¤©åŒ»ç£åœºï¼Œåˆ©äºè´¢è¿ä¸æ­£æ¡ƒèŠ±ã€‚<br>";
        if(pairCounts['ç»å‘½'] > 0) summaryHtml += "âš ï¸ å«æœ‰ç»å‘½ç£åœºï¼Œè¡Œäº‹å†²åŠ¨ï¼Œéœ€æ³¨æ„ç†è´¢ã€‚<br>";
        if(pairCounts['å»¶å¹´'] > 0) summaryHtml += "ğŸ‘” å«æœ‰å»¶å¹´ç£åœºï¼Œå·¥ä½œèƒ½åŠ›å¼ºï¼Œå‹åŠ›è¾ƒå¤§ã€‚<br>";
        if(pairCounts['äº”é¬¼'] > 0) summaryHtml += "ğŸ‘» å«æœ‰äº”é¬¼ç£åœºï¼Œæ€ç»´æ´»è·ƒä½†æ˜“ç”Ÿå˜åŠ¨ã€‚<br>";
        
        summary.innerHTML = summaryHtml;
        resultDiv.style.display = 'block';
    }

    // 2. ç”Ÿè¾°æ•°å­—äº”è¡Œé€»è¾‘ (ä¹å®«æ•°/ç”Ÿå‘½çµæ•°ç®—æ³•å˜ä½“)
    function analyzeBirth() {
        const dateInput = document.getElementById('birthDate').value;
        if(!dateInput) { alert("è¯·é€‰æ‹©æ—¥æœŸ"); return; }
        
        const date = new Date(dateInput);
        const y = date.getFullYear();
        const m = date.getMonth() + 1;
        const d = date.getDate();
        
        // ç®€å•è®¡ç®—ä¸»å‘½æ•° (å°†å¹´æœˆæ—¥æ•°å­—ç›¸åŠ ç›´åˆ°ä¸ªä½)
        const sumDigits = (num) => num.toString().split('').reduce((a,b)=>parseInt(a)+parseInt(b), 0);
        let total = sumDigits(y) + sumDigits(m) + sumDigits(d);
        while(total > 9) {
            total = sumDigits(total);
        }

        // æ•°å­—å¯¹åº”äº”è¡Œ (æ´›ä¹¦æ•°/æ²³å›¾æ•°æ··åˆå‚è€ƒï¼Œæ­¤å¤„é‡‡ç”¨å¸¸è§å¯¹åº”)
        // 1æ°´, 2åœŸ, 3æœ¨, 4æœ¨, 5åœŸ, 6é‡‘, 7é‡‘, 8åœŸ, 9ç«
        const wxMap = {
            1: 'æ°´ (åå®«)', 2: 'åœŸ (å¤å®«)', 3: 'æœ¨ (éœ‡å®«)', 
            4: 'æœ¨ (å·½å®«)', 5: 'åœŸ (ä¸­å®«)', 6: 'é‡‘ (ä¹¾å®«)', 
            7: 'é‡‘ (å…‘å®«)', 8: 'åœŸ (è‰®å®«)', 9: 'ç« (ç¦»å®«)'
        };

        const resultHtml = `
            <p><strong>ç”Ÿè¾°ä¸»å‘½æ•°ï¼š</strong> ${total}</p>
            <p><strong>æ ¸å¿ƒäº”è¡Œï¼š</strong> ${wxMap[total]}</p>
            <p><strong>äº”è¡Œå»ºè®®ï¼š</strong> ${getWxAdvice(total)}</p>
        `;
        document.getElementById('birthResult').innerHTML = resultHtml;
    }

    function getWxAdvice(num) {
        if(num === 1) return "æ°´ä¸»æ™ºï¼Œå®œä»äº‹æ€è€ƒã€æµåŠ¨æ€§è¡Œä¸šï¼Œæ³¨æ„è‚¾è„ä¿å…»ã€‚";
        if(num === 9) return "ç«ä¸»ç¤¼ï¼Œå®œæ–‡åŒ–ã€è‰ºæœ¯ã€ç§‘æŠ€è¡Œä¸šï¼Œæ³¨æ„å¿ƒè¡€ç®¡ä¿å…»ã€‚";
        if(num === 3 || num === 4) return "æœ¨ä¸»ä»ï¼Œå®œæ•™è‚²ã€åŒ»ç–—ã€å‡ºç‰ˆè¡Œä¸šï¼Œæ³¨æ„è‚èƒ†ä¿å…»ã€‚";
        if(num === 6 || num === 7) return "é‡‘ä¸»ä¹‰ï¼Œå®œé‡‘èã€æ³•å¾‹ã€ç®¡ç†è¡Œä¸šï¼Œæ³¨æ„å‘¼å¸ç³»ç»Ÿã€‚";
        return "åœŸä¸»ä¿¡ï¼Œå®œåœ°äº§ã€å†œä¸šã€æœåŠ¡è¡Œä¸šï¼Œæ³¨æ„è„¾èƒƒä¿å…»ã€‚";
    }

</script>

</body>
</html>